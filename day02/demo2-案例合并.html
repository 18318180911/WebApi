<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
          margin: 0;
          padding: 0;
        }
  
        table {
          border-collapse: collapse;
          border-spacing: 0;
          border: 1px solid #c0c0c0;
          width: 500px;
          margin: 100px auto;
          text-align: center;
        }
  
        th {
          background-color: #09c;
          font: bold 16px '微软雅黑';
          color: #fff;
          height: 24px;
        }
  
        td {
          border: 1px solid #d0d0d0;
          color: #404060;
          padding: 10px;
        }
  
        .allCheck {
          width: 80px;
        }
      </style>
</head>
<body>
    <table>
        <tr>
          <th class="allCheck">
            <input type="checkbox" name="" id="checkAll" />
            <span class="all">全选</span>
          </th>
          <th>商品</th>
          <th>商家</th>
          <th>价格</th>
        </tr>
        <tr>
          <td>
            <input type="checkbox" name="check" class="ck" />
          </td>
          <td>小米手机</td>
          <td>小米</td>
          <td>￥1999</td>
        </tr>
        <tr>
          <td>
            <input type="checkbox" name="check" class="ck" />
          </td>
          <td>小米净水器</td>
          <td>小米</td>
          <td>￥4999</td>
        </tr>
        <tr>
          <td>
            <input type="checkbox" name="check" class="ck" />
          </td>
          <td>小米电视</td>
          <td>小米</td>
          <td>￥5999</td>
        </tr>
      </table>
  
      <script>
        /* 
        1 获取 全选标签 绑定点击事件
          checkAll
  
        2 点击事件触发后 获取 复选框的选中属性  checkAll.checked
  
        3 把全选按钮的选中状态 设置到每一个 其他复选框中 
  
        4 数组和循环思想  解决重复工作的
          
         */
  
        let checkAll = document.querySelector('#checkAll');
  
        // 获取符合选择器要求的数组
        let checkboxList = document.querySelectorAll('.ck');
        // console.log(checkboxList);
  
        //  监听点击 绑定点击 注册点击 订阅点击
        checkAll.addEventListener('click', function () {
          // console.log('全选');
          // console.log(checkAll.checked); // 获取当前全选按钮的选中状态
          // 设置复选框 选中状态等于 全选框的选中状态
  
          for (let index = 0; index < checkboxList.length; index++) {
            // checkboxList[index] // 每一个复选框
            checkboxList[index].checked = checkAll.checked;
          }
        });
        let checkList = document.querySelectorAll('.ck');

      // 给每一个商品绑定点击事件
      for (let index = 0; index < checkList.length; index++) {
        checkList[index].addEventListener('click', function () {
          // 判断是否达到了全选 条件
          let checked = isAllChecked();
          // 设置全选按钮即可
          checkAll.checked=checked;
        });
      }
        // 函数来判断
      function isAllChecked() {
        // 1 存放选中的商品的数量
        let checkedNum = 0;
        // 2 商品数组做循环
        for (let index = 0; index < checkList.length; index++) {
          // 3  判断每一商品的选中状态
          if (checkList[index].checked) {
            checkedNum++;
          }
        }
        // 4 循环结束了 判断 选中商品的数量和 商品总数量之间的关系
        if (checkedNum === checkList.length) {
          // console.log('全选');
          return true;
        } else {
          // console.log('不全选');
          return false;
        }
      }
      </script>
</body>
</html>