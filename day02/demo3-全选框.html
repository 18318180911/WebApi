<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
          margin: 0;
          padding: 0;
        }
  
        table {
          border-collapse: collapse;
          border-spacing: 0;
          border: 1px solid #c0c0c0;
          width: 500px;
          margin: 100px auto;
          text-align: center;
        }
  
        th {
          background-color: #09c;
          font: bold 16px '微软雅黑';
          color: #fff;
          height: 24px;
        }
  
        td {
          border: 1px solid #d0d0d0;
          color: #404060;
          padding: 10px;
        }
  
        .allCheck {
          width: 80px;
        }
      </style>
</head>
<body>
    <table>
        <tr>
            <th class="allCheck">
                <input type="checkbox" name="" id="checkAll" />
                <span class="all">全选</span>
            </th>
            <th>商品</th>
            <th>商家</th>
            <th>价格</th>
        </tr>
        <tr>
            <td>
                <input type="checkbox" name="check" class="ck" />
            </td>
            <td>小米手机</td>
            <td>小米</td>
            <td>￥1999</td>
        </tr>
        <tr>
            <td>
                <input type="checkbox" name="check" class="ck" />
            </td>
            <td>小米净水器</td>
            <td>小米</td>
            <td>￥4999</td>
        </tr>
        <tr>
            <td>
                <input type="checkbox" name="check" class="ck" />
            </td>
            <td>小米电视</td>
            <td>小米</td>
            <td>￥5999</td>
        </tr>
        </table>
        <script>
            //获取元素，获取全选复选框
            let checkAll = document.querySelector('#checkAll');
            // 获取文本容器
            let all = document.querySelector('.all');
            // 获取其它的复选框
            let cks = document.querySelectorAll('.ck');
            // 用全选复选框的状态
            checkAll.addEventListener('click', function() {
                // 1.
                  let state = checkAll.checked
                  console.log(checkAll.checked);
                  cks.forEach(function(ele, index) {
                      ele.checked = state
                  })
                // 2.
                // for(let i = 0; i <= cks.length; i++) {
                //     cks[i].checked = checkAll.checked;
                // }
            })
            // 设置一个全局的标记
            for (let i = 0; i < cks.length; i++) {
                cks[i].addEventListener('click', function() {
                    // 实现方式就是获取当前被选中的 复选框的数量，与总数进行比较
                    // .ck:checked: 找到匹配的元素，只会匹配被选中的复选框
                    let count = document.querySelectorAll('.ck:checked').length;
                    if (count === cks.length) {
                        checkAll.checked = true;
                    } else {
                        checkAll.checked = false;
                    }
                })
            }
      </script>
</body>
</html>